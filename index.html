<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>BetKing –ú—ñ–Ω—ñ-–î–æ–¥–∞—Ç–æ–∫</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            padding: 15px;
            margin: 0;
            color: var(--tg-theme-text-color, #000000);
            background-color: var(--tg-theme-bg-color, #ffffff);
            overflow-x: hidden;
        }
        .container {
            text-align: center;
        }
        h1, h2 {
            color: var(--tg-theme-text-color, #000000);
        }
        h1 {
            font-size: 24px;
            margin-bottom: 10px;
        }
        h2 {
            font-size: 20px;
            margin-top: 25px;
            margin-bottom: 15px;
        }
        p {
            font-size: 16px;
            margin-bottom: 10px;
        }
        button, .odds-button, .stake-button, .action-button, .prediction-button {
            padding: 10px 15px;
            font-size: 16px;
            color: var(--tg-theme-button-text-color, #ffffff);
            background-color: var(--tg-theme-button-color, #007bff);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            margin: 5px;
            min-width: 80px;
        }
        .odds-button.selected, .prediction-button.selected {
            background-color: #FFE433;
            color: #000000;
        }
        .prediction-button:disabled {
            background-color: var(--tg-theme-hint-color, #cccccc);
            cursor: not-allowed;
        }
        .stake-options, .bet-confirmation, .prediction-result {
            margin-top: 15px;
            min-height: 40px; /* –©–æ–± —É–Ω–∏–∫–Ω—É—Ç–∏ —Å—Ç—Ä–∏–±–∫—ñ–≤ –≤–∏—Å–æ—Ç–∏ */
        }
        .hidden {
            display: none;
        }
        #userInfo {
            margin-top: 20px;
            font-size: 12px;
            color: var(--tg-theme-hint-color, #999999);
            word-break: break-all;
            padding-bottom: 20px;
        }
        .section-block {
            padding: 10px;
            border: 1px solid var(--tg-theme-hint-color, #dddddd);
            border-radius: 8px;
            margin-bottom: 15px;
            background-color: var(--tg-theme-secondary-bg-color, #f8f8f8);
        }
        .teams, .express-title, .daily-match-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .match-date, .express-total-odds, .streak-info, .rewards-info {
            font-size: 14px;
            color: var(--tg-theme-hint-color, #777777);
            margin-bottom: 10px;
        }
        .rewards-info { font-style: italic; }
        .odds-container, .prediction-options {
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin-bottom:10px;
        }
        .express-selections {
            list-style: none;
            padding-left: 0;
            text-align: left;
            font-size: 14px;
        }
        .express-selections li {
            padding: 5px 0;
            border-bottom: 1px dashed var(--tg-theme-hint-color, #eeeeee);
        }
        .express-selections li:last-child {
            border-bottom: none;
        }
        hr.section-divider {
            margin-top: 30px;
            margin-bottom: 10px;
            border: none;
            border-top: 1px solid var(--tg-theme-hint-color, #cccccc);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>–ú—ñ–Ω—ñ-–î–æ–¥–∞—Ç–æ–∫ BetKing</h1>

        <div id="matchOfTheDaySection">
            <h2>–ú–∞—Ç—á –¥–Ω—è</h2>
            <div class="section-block">
                <div id="matchTeams" class="teams"></div>
                <div id="matchDate" class="match-date"></div>
                <div id="oddsContainer" class="odds-container"></div>
            </div>
            <div id="motdStakeOptions" class="stake-options hidden">
                <p>–û–±–µ—Ä—ñ—Ç—å —Å—É–º—É —Å—Ç–∞–≤–∫–∏ –¥–ª—è –ú–∞—Ç—á—É –¥–Ω—è:</p>
                <button class="stake-button motd-stake" data-amount="100">100 –≥—Ä–Ω</button>
                <button class="stake-button motd-stake" data-amount="200">200 –≥—Ä–Ω</button>
                <button class="stake-button motd-stake" data-amount="500">500 –≥—Ä–Ω</button>
            </div>
            <div id="motdBetConfirmation" class="bet-confirmation"></div>
        </div>

        <hr class="section-divider">

        <div id="expressOfTheDaySection">
            <h2>–ï–∫—Å–ø—Ä–µ—Å –¥–Ω—è</h2>
            <div class="section-block">
                <div id="expressTitle" class="express-title"></div>
                <ul id="expressSelections" class="express-selections"></ul>
                <div id="expressTotalOdds" class="express-total-odds"></div>
                <button id="acceptExpressButton" class="action-button">–ü–æ—Å—Ç–∞–≤–∏—Ç–∏ –Ω–∞ —Ü–µ–π –ï–∫—Å–ø—Ä–µ—Å</button>
            </div>
            <div id="eotdStakeOptions" class="stake-options hidden">
                <p>–û–±–µ—Ä—ñ—Ç—å —Å—É–º—É —Å—Ç–∞–≤–∫–∏ –¥–ª—è –ï–∫—Å–ø—Ä–µ—Å—É –¥–Ω—è:</p>
                <button class="stake-button eotd-stake" data-amount="100">100 –≥—Ä–Ω</button>
                <button class="stake-button eotd-stake" data-amount="200">200 –≥—Ä–Ω</button>
                <button class="stake-button eotd-stake" data-amount="500">500 –≥—Ä–Ω</button>
            </div>
            <div id="eotdBetConfirmation" class="bet-confirmation"></div>
        </div>

        <hr class="section-divider">

        <div id="dailyLoginSection">
            <h2>–©–æ–¥–µ–Ω–Ω–∏–π –ü—Ä–æ–≥–Ω–æ–∑</h2>
            <div class="section-block">
                <p class="streak-info">–í–∞—à–∞ –ø–æ—Ç–æ—á–Ω–∞ —Å–µ—Ä—ñ—è –ø–µ—Ä–µ–º–æ–≥: <span id="currentStreak">0</span></p>
                <p class="rewards-info">–ù–∞–≥–æ—Ä–æ–¥–∏: 3 –¥–Ω—ñ - —Ñ—Ä—ñ–±–µ—Ç X, 7 –¥–Ω—ñ–≤ - —Ñ—Ä—ñ–±–µ—Ç Y, 10 –¥–Ω—ñ–≤ - —Ñ—Ä—ñ–±–µ—Ç Z.</p>
                <div id="dailyMatchInfo">
                    <p class="daily-match-title">–ú–∞—Ç—á –Ω–∞ —Å—å–æ–≥–æ–¥–Ω—ñ: <span id="dailyMatchTeams"></span></p>
                    <div id="dailyPredictionOptions" class="prediction-options">
                        </div>
                </div>
                <div id="dailyPredictionResult" class="prediction-result"></div>
            </div>
        </div>


        <hr class="section-divider">
        <div id="userInfo"></div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.ready();
        tg.expand();

        if (tg.themeParams.secondary_bg_color) {
            tg.setHeaderColor(tg.themeParams.secondary_bg_color);
        } else if (tg.themeParams.bg_color) {
             tg.setHeaderColor(tg.themeParams.bg_color);
        }

        // --- UTILITY FUNCTIONS ---
        function getFormattedDate(date) {
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            return `${year}-${month}-${day}`;
        }
        const TODAY_STRING = getFormattedDate(new Date());

        // --- –ú–∞—Ç—á –¥–Ω—è ---
        const matchOfTheDayData = { /* ... (–∫–æ–¥ –±–µ–∑ –∑–º—ñ–Ω) ... */ };
        let motdSelectedOdd = null;
        const matchTeamsEl = document.getElementById('matchTeams');
        const matchDateEl = document.getElementById('matchDate');
        const oddsContainerEl = document.getElementById('oddsContainer');
        const motdStakeOptionsEl = document.getElementById('motdStakeOptions');
        const motdBetConfirmationEl = document.getElementById('motdBetConfirmation');

        function displayMatchOfTheDay() { /* ... (–∫–æ–¥ –±–µ–∑ –∑–º—ñ–Ω) ... */ }
        function handleMotdOddSelection(event) { /* ... (–∫–æ–¥ –±–µ–∑ –∑–º—ñ–Ω) ... */ }
        document.querySelectorAll('.motd-stake').forEach(button => { /* ... (–∫–æ–¥ –±–µ–∑ –∑–º—ñ–Ω, –∞–ª–µ –∑ –∫–æ–Ω—Ñ–µ—Ç—ñ) ... */ });
        
        // --- –ö–æ–ø—ñ—é—î–º–æ –ª–æ–≥—ñ–∫—É –ú–∞—Ç—á—É –¥–Ω—è, —è–∫ –≤–æ–Ω–∞ –±—É–ª–∞ –≤ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–º—É –∫—Ä–æ—Ü—ñ ---
        matchOfTheDayData.team1 = "–î–∏–Ω–∞–º–æ –ö–∏—ó–≤";
        matchOfTheDayData.team2 = "–®–∞—Ö—Ç–∞—Ä –î–æ–Ω–µ—Ü—å–∫";
        matchOfTheDayData.date = "12 –¢—Ä–∞–≤–Ω—è 2025, 19:00";
        matchOfTheDayData.odds = {
            p1: { name: "–ü1", value: 2.50, description: "–ü–µ—Ä–µ–º–æ–≥–∞ –î–∏–Ω–∞–º–æ –ö–∏—ó–≤" },
            x:  { name: "X", value: 3.20, description: "–ù—ñ—á–∏—è" },
            p2: { name: "–ü2", value: 2.80, description: "–ü–µ—Ä–µ–º–æ–≥–∞ –®–∞—Ö—Ç–∞—Ä –î–æ–Ω–µ—Ü—å–∫" }
        };

        function displayMatchOfTheDay() {
            matchTeamsEl.textContent = `${matchOfTheDayData.team1} - ${matchOfTheDayData.team2}`;
            matchDateEl.textContent = matchOfTheDayData.date;
            oddsContainerEl.innerHTML = '';
            for (const key in matchOfTheDayData.odds) {
                const odd = matchOfTheDayData.odds[key];
                const button = document.createElement('button');
                button.className = 'odds-button';
                button.dataset.key = key;
                button.innerHTML = `${odd.name}<br>${odd.value.toFixed(2)}`;
                button.addEventListener('click', handleMotdOddSelection);
                oddsContainerEl.appendChild(button);
            }
        }
        function handleMotdOddSelection(event) {
            document.querySelectorAll('#oddsContainer .odds-button').forEach(btn => btn.classList.remove('selected'));
            const selectedButton = event.currentTarget;
            selectedButton.classList.add('selected');
            const oddKey = selectedButton.dataset.key;
            motdSelectedOdd = matchOfTheDayData.odds[oddKey];
            motdStakeOptionsEl.classList.remove('hidden');
            motdBetConfirmationEl.textContent = '';
        }
        document.querySelectorAll('.motd-stake').forEach(button => {
            button.addEventListener('click', function() {
                if (!motdSelectedOdd) {
                    tg.showAlert('–ë—É–¥—å –ª–∞—Å–∫–∞, —Å–ø–æ—á–∞—Ç–∫—É –æ–±–µ—Ä—ñ—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –º–∞—Ç—á—É –¥–Ω—è!');
                    return;
                }
                const amount = parseInt(this.dataset.amount);
                const potentialWin = (amount * motdSelectedOdd.value).toFixed(2);
                const confirmationMessage = `–ú–∞—Ç—á –¥–Ω—è: –í–∞—à—É —Å—Ç–∞–≤–∫—É –Ω–∞ "${motdSelectedOdd.description}" (${motdSelectedOdd.name} @${motdSelectedOdd.value.toFixed(2)}) –Ω–∞ —Å—É–º—É ${amount} –≥—Ä–Ω –ø—Ä–∏–π–Ω—è—Ç–æ (MVP).\n–ú–æ–∂–ª–∏–≤–∏–π –≤–∏–≥—Ä–∞—à: ${potentialWin} –≥—Ä–Ω.`;
                motdBetConfirmationEl.textContent = confirmationMessage;
                tg.HapticFeedback.notificationOccurred('success');
                if (typeof confetti === 'function') { confetti({ particleCount: 120, spread: 80, origin: { y: 0.6 } }); }
                motdStakeOptionsEl.classList.add('hidden');
                document.querySelectorAll('#oddsContainer .odds-button').forEach(btn => btn.classList.remove('selected'));
                motdSelectedOdd = null;
            });
        });


        // --- –ï–∫—Å–ø—Ä–µ—Å –¥–Ω—è ---
        const expressOfTheDayData = { /* ... (–∫–æ–¥ –±–µ–∑ –∑–º—ñ–Ω) ... */ };
        const expressTitleEl = document.getElementById('expressTitle');
        const expressSelectionsEl = document.getElementById('expressSelections');
        const expressTotalOddsEl = document.getElementById('expressTotalOdds');
        const acceptExpressButton = document.getElementById('acceptExpressButton');
        const eotdStakeOptionsEl = document.getElementById('eotdStakeOptions');
        const eotdBetConfirmationEl = document.getElementById('eotdBetConfirmation');

        function displayExpressOfTheDay() { /* ... (–∫–æ–¥ –±–µ–∑ –∑–º—ñ–Ω) ... */ }
        acceptExpressButton.addEventListener('click', function() { /* ... (–∫–æ–¥ –±–µ–∑ –∑–º—ñ–Ω) ... */ });
        document.querySelectorAll('.eotd-stake').forEach(button => { /* ... (–∫–æ–¥ –±–µ–∑ –∑–º—ñ–Ω, –∞–ª–µ –∑ –∫–æ–Ω—Ñ–µ—Ç—ñ) ... */ });

        // --- –ö–æ–ø—ñ—é—î–º–æ –ª–æ–≥—ñ–∫—É –ï–∫—Å–ø—Ä–µ—Å—É –¥–Ω—è ---
        expressOfTheDayData.title = "–°—É–ø–µ—Ä –ï–∫—Å–ø—Ä–µ—Å –Ω–∞ –í–∏—Ö—ñ–¥–Ω—ñ!";
        expressOfTheDayData.selections = [
            { description: "–ú–∞–Ω—á–µ—Å—Ç–µ—Ä –Æ–Ω–∞–π—Ç–µ–¥ - –ü–µ—Ä–µ–º–æ–≥–∞" },
            { description: "–ë–∞—Ä—Å–µ–ª–æ–Ω–∞ - –¢–ë 2.5" },
            { description: "–Æ–≤–µ–Ω—Ç—É—Å - –§–æ—Ä–∞(0)" }
        ];
        expressOfTheDayData.totalOdds = 6.75;

        function displayExpressOfTheDay() {
            expressTitleEl.textContent = expressOfTheDayData.title;
            expressSelectionsEl.innerHTML = ''; 
            expressOfTheDayData.selections.forEach(selection => {
                const listItem = document.createElement('li');
                listItem.textContent = selection.description;
                expressSelectionsEl.appendChild(listItem);
            });
            expressTotalOddsEl.textContent = `–ó–∞–≥–∞–ª—å–Ω–∏–π –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç: ${expressOfTheDayData.totalOdds.toFixed(2)}`;
        }
        acceptExpressButton.addEventListener('click', function() {
            eotdStakeOptionsEl.classList.remove('hidden');
            eotdBetConfirmationEl.textContent = '';
        });
        document.querySelectorAll('.eotd-stake').forEach(button => {
            button.addEventListener('click', function() {
                const amount = parseInt(this.dataset.amount);
                const potentialWin = (amount * expressOfTheDayData.totalOdds).toFixed(2);
                const confirmationMessage = `–ï–∫—Å–ø—Ä–µ—Å –¥–Ω—è: –í–∞—à—É —Å—Ç–∞–≤–∫—É –∑ –∫–æ–µ—Ñ. ${expressOfTheDayData.totalOdds.toFixed(2)} –Ω–∞ —Å—É–º—É ${amount} –≥—Ä–Ω –ø—Ä–∏–π–Ω—è—Ç–æ (MVP).\n–ú–æ–∂–ª–∏–≤–∏–π –≤–∏–≥—Ä–∞—à: ${potentialWin} –≥—Ä–Ω.`;
                eotdBetConfirmationEl.textContent = confirmationMessage;
                tg.HapticFeedback.notificationOccurred('success');
                if (typeof confetti === 'function') { confetti({ particleCount: 120, spread: 80, origin: { y: 0.6 }, zIndex: 9999 }); }
                eotdStakeOptionsEl.classList.add('hidden');
            });
        });


        // --- –©–æ–¥–µ–Ω–Ω–∏–π –ü—Ä–æ–≥–Ω–æ–∑ ---
        const dailyMatchData = {
            team1: "–í–æ—Ä—Å–∫–ª–∞ –ü–æ–ª—Ç–∞–≤–∞",
            team2: "–ó–æ—Ä—è –õ—É–≥–∞–Ω—Å—å–∫",
            options: {
                p1: { name: "–ü1", description: "–ü–µ—Ä–µ–º–æ–≥–∞ –í–æ—Ä—Å–∫–ª–∞" },
                x:  { name: "X", description: "–ù—ñ—á–∏—è" },
                p2: { name: "–ü2", description: "–ü–µ—Ä–µ–º–æ–≥–∞ –ó–æ—Ä—è" }
            },
            correctOutcome: "p1" // –ü—Ä–∞–≤–∏–ª—å–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è —Ü—å–æ–≥–æ –º–∞—Ç—á—É (–¥–ª—è MVP)
        };

        const dailyLoginState = {
            currentStreak: 0,
            lastPredictionDate: null // YYYY-MM-DD
        };

        const currentStreakEl = document.getElementById('currentStreak');
        const dailyMatchTeamsEl = document.getElementById('dailyMatchTeams');
        const dailyPredictionOptionsEl = document.getElementById('dailyPredictionOptions');
        const dailyPredictionResultEl = document.getElementById('dailyPredictionResult');

        function loadDailyLoginState() {
            const savedStreak = localStorage.getItem('betkingDailyStreak');
            const savedDate = localStorage.getItem('betkingLastPredictionDate');

            if (savedStreak !== null) {
                dailyLoginState.currentStreak = parseInt(savedStreak, 10);
            }
            if (savedDate !== null) {
                dailyLoginState.lastPredictionDate = savedDate;
            }
            // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞, —á–∏ –Ω–µ –ø—Ä–æ–ø—É—â–µ–Ω–æ –¥–µ–Ω—å (—è–∫—â–æ –æ—Å—Ç–∞–Ω–Ω—ñ–π –ø—Ä–æ–≥–Ω–æ–∑ –±—É–≤ –Ω–µ —Å—å–æ–≥–æ–¥–Ω—ñ —ñ –Ω–µ –≤—á–æ—Ä–∞)
            if (dailyLoginState.lastPredictionDate && dailyLoginState.lastPredictionDate !== TODAY_STRING) {
                const yesterday = new Date();
                yesterday.setDate(yesterday.getDate() - 1);
                if (dailyLoginState.lastPredictionDate !== getFormattedDate(yesterday)) {
                    dailyLoginState.currentStreak = 0; // –°–∫–∏–¥–∞—î–º–æ —Å—Ç—Ä—ñ–∫, —è–∫—â–æ –ø—Ä–æ–ø—É—â–µ–Ω–æ –±—ñ–ª—å—à–µ –æ–¥–Ω–æ–≥–æ –¥–Ω—è
                }
            }
             currentStreakEl.textContent = dailyLoginState.currentStreak;
        }

        function saveDailyLoginState() {
            localStorage.setItem('betkingDailyStreak', dailyLoginState.currentStreak);
            localStorage.setItem('betkingLastPredictionDate', dailyLoginState.lastPredictionDate);
        }

        function displayDailyPredictionModule() {
            loadDailyLoginState();
            currentStreakEl.textContent = dailyLoginState.currentStreak;
            dailyMatchTeamsEl.textContent = `${dailyMatchData.team1} - ${dailyMatchData.team2}`;
            dailyPredictionOptionsEl.innerHTML = '';

            let alreadyPredictedToday = dailyLoginState.lastPredictionDate === TODAY_STRING;

            for (const key in dailyMatchData.options) {
                const option = dailyMatchData.options[key];
                const button = document.createElement('button');
                button.className = 'prediction-button';
                button.dataset.key = key;
                button.textContent = option.name;
                button.title = option.description;
                if (alreadyPredictedToday) {
                    button.disabled = true;
                }
                button.addEventListener('click', handleDailyPrediction);
                dailyPredictionOptionsEl.appendChild(button);
            }

            if (alreadyPredictedToday) {
                dailyPredictionResultEl.textContent = "–í–∏ –≤–∂–µ –∑—Ä–æ–±–∏–ª–∏ —Å–≤—ñ–π –ø—Ä–æ–≥–Ω–æ–∑ –Ω–∞ —Å—å–æ–≥–æ–¥–Ω—ñ. –ü–æ–≤–µ—Ä—Ç–∞–π—Ç–µ—Å—å –∑–∞–≤—Ç—Ä–∞!";
            } else {
                 dailyPredictionResultEl.textContent = "–ó—Ä–æ–±—ñ—Ç—å —Å–≤—ñ–π –ø—Ä–æ–≥–Ω–æ–∑ –Ω–∞ –º–∞—Ç—á –¥–Ω—è!";
            }
        }

        function handleDailyPrediction(event) {
            if (dailyLoginState.lastPredictionDate === TODAY_STRING) {
                tg.showAlert("–í–∏ –≤–∂–µ –∑—Ä–æ–±–∏–ª–∏ –ø—Ä–æ–≥–Ω–æ–∑ –Ω–∞ —Å—å–æ–≥–æ–¥–Ω—ñ!");
                return;
            }

            const predictedKey = event.currentTarget.dataset.key;
            const isCorrect = predictedKey === dailyMatchData.correctOutcome;

            let message = `–í–∞—à –ø—Ä–æ–≥–Ω–æ–∑: ${dailyMatchData.options[predictedKey].description}. `;

            if (isCorrect) {
                message += "–¶–µ –ü–†–ê–í–ò–õ–¨–ù–û! ‚úÖ";
                // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –ø—Ä–æ–≥–Ω–æ–∑ –±—É–≤ –≤—á–æ—Ä–∞, —â–æ–± –ø—Ä–æ–¥–æ–≤–∂–∏—Ç–∏ —Å—Ç—Ä—ñ–∫
                const yesterday = new Date();
                yesterday.setDate(yesterday.getDate() - 1);
                if (dailyLoginState.lastPredictionDate === getFormattedDate(yesterday)) {
                    dailyLoginState.currentStreak++;
                } else {
                    // –Ø–∫—â–æ –æ—Å—Ç–∞–Ω–Ω—ñ–π –ø—Ä–æ–≥–Ω–æ–∑ –±—É–≤ –Ω–µ –≤—á–æ—Ä–∞ (–∞–±–æ –π–æ–≥–æ –Ω–µ –±—É–ª–æ), –ø–æ—á–∏–Ω–∞—î–º–æ –Ω–æ–≤–∏–π —Å—Ç—Ä—ñ–∫
                    dailyLoginState.currentStreak = 1;
                }
                tg.HapticFeedback.notificationOccurred('success');
                 if (typeof confetti === 'function') { confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 } }); }
            } else {
                message += "–ù–∞ –∂–∞–ª—å, –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û. ‚ùå";
                dailyLoginState.currentStreak = 0;
                tg.HapticFeedback.notificationOccurred('error');
            }

            dailyLoginState.lastPredictionDate = TODAY_STRING;
            saveDailyLoginState();
            currentStreakEl.textContent = dailyLoginState.currentStreak;
            dailyPredictionResultEl.textContent = message;

            // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞–≥–æ—Ä–æ–¥
            const rewards = { 3: "–§—Ä—ñ–±–µ—Ç X", 7: "–§—Ä—ñ–±–µ—Ç Y", 10: "–§—Ä—ñ–±–µ—Ç Z" };
            if (isCorrect && rewards[dailyLoginState.currentStreak]) {
                const rewardMessage = `\nüéâ –í—ñ—Ç–∞—î–º–æ! –í–∏ –≤–∏–≥—Ä–∞–ª–∏ ${rewards[dailyLoginState.currentStreak]} –∑–∞ ${dailyLoginState.currentStreak} –ø—Ä–∞–≤–∏–ª—å–Ω–∏—Ö –ø—Ä–æ–≥–Ω–æ–∑—ñ–≤ –ø–æ—Å–ø—ñ–ª—å!`;
                dailyPredictionResultEl.textContent += rewardMessage;
                // –¢—É—Ç –º–æ–∂–Ω–∞ –¥–æ–¥–∞—Ç–∏ —â–µ –æ–¥–∏–Ω –∫–æ–Ω—Ñ–µ—Ç—ñ –∞–±–æ —ñ–Ω—à–∏–π –µ—Ñ–µ–∫—Ç –¥–ª—è –Ω–∞–≥–æ—Ä–æ–¥–∏
            }

            // –ë–ª–æ–∫—É—î–º–æ –∫–Ω–æ–ø–∫–∏ –ø—ñ—Å–ª—è –ø—Ä–æ–≥–Ω–æ–∑—É
            document.querySelectorAll('.prediction-button').forEach(btn => btn.disabled = true);
        }


        // --- –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ ---
        const userInfoDiv = document.getElementById('userInfo');
        if (tg.initDataUnsafe && tg.initDataUnsafe.user) {
            const user = tg.initDataUnsafe.user;
            let userInfoText = `–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á: ${user.first_name || ''} ${user.last_name || ''} (@${user.username || 'N/A'}, ID: ${user.id})`;
            userInfoDiv.innerHTML = userInfoText;
        } else {
            userInfoDiv.textContent = "–î–∞–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ Telegram –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ñ.";
        }

        // --- –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –≤—Å—ñ—Ö –º–æ–¥—É–ª—ñ–≤ ---
        displayMatchOfTheDay();
        displayExpressOfTheDay();
        displayDailyPredictionModule();

    </script>
</body>
</html>